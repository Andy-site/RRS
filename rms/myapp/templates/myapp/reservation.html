<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Table Reservation</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 dark:bg-gray-800">
<div class="w-full max-w-6xl mx-auto px-4 py-8 sm:px-6 lg:px-8">
  <div class="grid gap-8">
    <div class="bg-white dark:bg-gray-950 rounded-lg shadow-lg p-6 sm:p-8">
      <div class="grid gap-6">
        <div>
          <h1 class="text-2xl font-bold">Table Reservation</h1>
          <p class="text-gray-500 dark:text-gray-400">Find and reserve the perfect table for your event.</p>
        </div>
        <div class="grid sm:grid-cols-3 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300" for="party-size">
              Party Size
            </label>
            <select id="size" class="mt-1 flex w-full items-center justify-center rounded-md border border-gray-300 bg-gray-50 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600">
              <option value="1">Table of 1</option>
              <option value="2" selected="">Table of 2</option>
              <option value="4">Table of 4</option>
              <option value="6">Table of 6</option>
              <option value="8">Table of 8</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300" for="date">
              Date
            </label>
            <input id="date" type="date" class="hidden"/>
            <button id="show-tables" class="mt-1 flex w-full items-center justify-center rounded-md border border-gray-300 bg-gray-50 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600">
              <svg class="mr-2 h-5 w-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                <path clip-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" fill-rule="evenodd"></path>
              </svg>
              Select Date
            </button>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300" for="time">
              Time
            </label>
            <select class="mt-1 flex w-full items-center justify-center rounded-md border border-gray-300 bg-gray-50 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600">
              <option value="12:00">12:00 PM</option>
              <option value="13:00">1:00 PM</option>
              <option value="14:00">2:00 PM</option>
              <option value="15:00">3:00 PM</option>
              <option value="16:00">4:00 PM</option>
              <option value="17:00">5:00 PM</option>
              <option value="18:00" selected="">6:00 PM</option>
              <option value="19:00">7:00 PM</option>
              <option value="20:00">8:00 PM</option>
              <option value="21:00">9:00 PM</option>
            </select>
          </div>
        </div>
        <div class="grid sm:grid-cols-2 gap-4" id="table-container">
          <!-- Table data will be inserted here -->
        </div>
        <div class="flex justify-between items-center">
          <a class="text-blue-600 hover:underline" href="#">
            Back to Home
          </a>
          <button id="confirm-order" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
            Confirm Order
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.getElementById('show-tables').addEventListener('click', function() {
    var date = document.getElementById('date').value;
    var size = parseInt(document.getElementById('size').value);

    fetch(`/get-tables/?date=${date}&size=${size}`)
      .then(response => response.json())
      .then(data => {
        var tableContainer = document.getElementById('table-container');
        tableContainer.innerHTML = '';

        data.forEach(function(tableData) {
          var tableElement = document.createElement('div');
          tableElement.textContent = `Table no.${tableData.number}`;
          tableElement.className = 'bg-green-100 dark:bg-green-900 rounded-lg p-6 flex flex-col items-center justify-center';

          var availability = tableData.reserved ? 'Reserved' : `${tableData.seats} seats available`;
          var btnClass = tableData.reserved ? 'bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900' : 'bg-green-500 hover:bg-green-600';

          tableElement.innerHTML = `
            <div class="bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400 rounded-full p-2">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                <path clip-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" fill-rule="evenodd"></path>
              </svg>
            </div>
            <h3 class="text-lg font-bold mt-4">Table ${tableData.number}</h3>
            <p class="text-gray-500 dark:text-gray-400 mt-2">${availability}</p>
            <button class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white ${btnClass} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 mt-4">
              Reserve
            </button>
          `;

          if (!tableData.reserved) {
            tableElement.querySelector('button').addEventListener('click', function() {
              // Handle reservation logic here
            });
          }

          tableContainer.appendChild(tableElement);
        });
      });
  });

  document.getElementById('confirm-order').addEventListener('click', function() {
    // Handle confirm order logic here
  });
</script>
</body>
</html>